{"ast":null,"code":"/*\n * wysiwyg web editor\n *\n * suneditor.js\n * Copyright 2017 JiHong Lee.\n * MIT license.\n */\n'use strict';\n\nexport default {\n  name: 'template',\n  display: 'submenu',\n  add: function add(core, targetElement) {\n    var context = core.context;\n    context.template = {\n      selectedIndex: -1\n    };\n    /** set submenu */\n\n    var templateDiv = this.setSubmenu(core);\n    /** add event listeners */\n\n    templateDiv.querySelector('ul').addEventListener('click', this.pickup.bind(core));\n    /** append target button menu */\n\n    core.initMenuTarget(this.name, targetElement, templateDiv);\n    /** empty memory */\n\n    templateDiv = null;\n  },\n  setSubmenu: function setSubmenu(core) {\n    var templateList = core.options.templates;\n\n    if (!templateList || templateList.length === 0) {\n      throw Error('[SUNEDITOR.plugins.template.fail] To use the \"template\" plugin, please define the \"templates\" option.');\n    }\n\n    var listDiv = core.util.createElement('DIV');\n    listDiv.className = 'se-list-layer';\n    var list = '<div class=\"se-submenu se-list-inner\">' + '<ul class=\"se-list-basic\">';\n\n    for (var i = 0, len = templateList.length, t; i < len; i++) {\n      t = templateList[i];\n      list += '<li><button type=\"button\" class=\"se-btn-list\" data-value=\"' + i + '\" title=\"' + t.name + '\" aria-label=\"' + t.name + '\">' + t.name + '</button></li>';\n    }\n\n    list += '</ul></div>';\n    listDiv.innerHTML = list;\n    return listDiv;\n  },\n  pickup: function pickup(e) {\n    if (!/^BUTTON$/i.test(e.target.tagName)) return false;\n    e.preventDefault();\n    e.stopPropagation();\n    this.context.template.selectedIndex = e.target.getAttribute('data-value') * 1;\n    var temp = this.options.templates[this.context.template.selectedIndex];\n\n    if (temp.html) {\n      this.setContents(temp.html);\n    } else {\n      this.submenuOff();\n      throw Error('[SUNEDITOR.template.fail] cause : \"templates[i].html not found\"');\n    }\n\n    this.submenuOff();\n  }\n};","map":null,"metadata":{},"sourceType":"module"}